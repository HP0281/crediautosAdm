
<div class="container table-responsive">
    <button style="margin-bottom: 10px; margin-left: 0px;" class="btn btn-warning text-white" (click)="ngOnInit()">
        <i class="material-icons text-white">restore_page
        </i> Refrescar Tabla
    </button>

    <div class="card min">
        <div class="card-header">
            <h3>LISTADO DE PROMOCIONES</h3>

        </div>
        <input class="form-control" type="text" name="filterProducto" placeholder="buscar promociones">
        <div class="card-body">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Descripcion</th>
                        <th>Precio</th>
                        <th>Producto</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let promocion of promociones" class="text-center">
                        <td>{{promocion.name}}</td>
                        <td>{{promocion.desc}}</td>
                        <td>{{promocion.precio}}</td>
                        <td><a class="btn " target="_Blank" [href]="promocion.url"><i class="material-icons">visibility</i></a></td>
                        <td>
                            <button (click)="modificarPromocion(promocion,ModalModificar)" style="margin: 10px" class="btn btn-primary">Modificar</button>
                            <button (click)="eliminarPromocion(promocion)" style="margin: 10px" class="btn btn-danger">Eliminar</button>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>
        <!-- <div *ngIf="failEliminado" class="float-left">
            <p class="p-3 bg-danger text-white rounded">Error: {{msjErr}}</p>
        </div>
        <div *ngIf="eliminado" class="float-left">
            <p class="p-3 bg-success text-white rounded">OK: {{msjOK}}</p>
        </div>
        <div *ngIf="failActualizado" class="float-left">
            <p class="p-3 bg-danger text-white rounded" style="margin: 10px">Error: {{msjErr}}</p>
        </div>
        <div *ngIf="actualizado" class="float-left">
            <p class="p-3 bg-success text-white rounded" style="margin: 10px">OK: {{msjOK}}</p>
        </div>-->
    </div>
</div>

<ng-template #ModalModificar>
    <div class="card-body">
        <form action="" #f="ngForm" novalidate [formGroup]="promoform">
            <div class="form-group ">
                <label for=" ">Nombre Producto</label>
                <input type="text " class="form-control " formControlName="name" name="nombre" required>
            </div>
            <div class="form-group ">
                <label for=" ">Descripcion</label>
                <input type="text " class="form-control " formControlName="desc" name="descripcion" required>
            </div>
            
            <div class="form-group ">
                <label for=" ">Precio</label>
                <input type="number" class="form-control " formControlName="precio" name="valorProducto" required>
            </div>

            <div class="form-group ">
                <label for=" ">Url del producto</label>
                <input type="text" class="form-control " formControlName="url" name="url" required>
            </div>

            <div class="form-group ">
                <!-- <br>
                <input type="file" class="btn btn-dark " (change)="onFileChanged($event)">-->
                <hr>
                <div >
                    <input type="file" #inputfile (change)="seleccionarImagen($event, elseBlock3)" hidden accept="image/*">
                    <button  class="btn btn-success " (click)="inputfile.click()">Seleccionar imagen</button>
                </div>
                <ng-template #elseBlock3>
                    <div class="card-img-top row">
                        <div class="background" *ngIf="cargo">
                            <img [src]="promoform.get('img').value">
                        </div>
                    </div>
                    <div class="row">
                        <br>
                    <button class="btn btn-success " (click)="inputfile.click()">Cambiar imagen</button>
                    </div>
                </ng-template>
                <hr>
            </div>
            <div class="form-group ">
                <div class="form-group ">
                    <div class="col-md-12 ">
                        <!-- <div *ngIf="message">{{message}}</div> -->
                    </div>
                </div>
            </div>

            <div class="container row ">
                <div class="col-md-12 ">
                    <div *ngIf="cargo">
                        <img [src]="promoform.get('img').value">
                    </div>
                </div>
            </div>

            <button class="btn btn-danger " (click)="guardarProducto() " [disabled]="!promoform.valid">Guardar</button>

        </form>
        
        <div *ngIf="creado " class="float-left ">
            <p class="p-3 bg-success text-white rounded " style="margin: 10px ">OK: {{msjOK}}</p>
        </div>

    </div>
</ng-template>