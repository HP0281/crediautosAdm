{"version":3,"sources":["webpack:///./src/app/services/vehicles.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAA2C;AAI4C;AAClD;AAKrC,IAAa,eAAe,GAA5B,MAAa,eAAe;IAM1B,YAA6B,GAAqB;QAArB,QAAG,GAAH,GAAG,CAAkB;QAChD,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC,UAAU,CAAU,UAAU,CAAC,CAAC;QAC7D,IAAI,CAAC,WAAW,EAAE,CAAC;IACpB,CAAC;IAEF,gBAAgB,CAAC,SAAiB;QAClC,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,MAAM,EAAC,EAAE;YAC1C,IAAI;gBACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC;gBACpE,OAAO,CAAC,MAAM,CAAC,CAAC;aACjB;YAAC,OAAO,KAAK,EAAE;gBACd,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;aACvB;QACH,CAAC,EAAC,CAAC;IACH,CAAC;IACD,aAAa,CAAC,OAAgB,EAAE,UAAkB;QAChD,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,MAAM,EAAG,EAAE,CAAC;YAC7C,IAAI;gBACF,MAAM,EAAE,GAAG,UAAU,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;gBAC7C,MAAM,IAAI,mBAAI,EAAE,IAAK,OAAO,CAAE,CAAC;gBAC/B,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAC9D,OAAO,CAAC,MAAM,CAAC,CAAC;aACjB;YAAC,OAAO,KAAK,EAAE;gBACd,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;aACvB;QACH,CAAC,EAAC,CAAC;IACL,CAAC;IACO,WAAW;QACjB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,eAAe,EAAE,CAAC,IAAI,CAC1D,0DAAG,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAa,CAAC,CAAC,CACnE,CAAC;IACJ,CAAC;IACD,qBAAqB,CAAC,EAAS;QAC7B,OAAO,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,UAAU,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,UAAU,EAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC;IACjG,CAAC;IAED,eAAe,CAAC,EAAS;QACvB,OAAO,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,UAAU,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC;IAC3F,CAAC;CACF;;YAvCmC,wEAAgB;;AANvC,eAAe;IAH3B,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;mFAOkC,wEAAgB;GANvC,eAAe,CA6C3B;AA7C2B","file":"common-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Vehicle } from '../models/vehicle.interface';\r\n\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VehiclesService {\r\n\r\n  vehicles: Observable<Vehicle[]>;\r\n\r\n  private vehicleCollection: AngularFirestoreCollection<Vehicle>;\r\n\r\n  constructor(private readonly afs: AngularFirestore) {\r\n    this.vehicleCollection = afs.collection<Vehicle>('vehicles');\r\n    this.getVehicles();\r\n   }\r\n\r\n  onDeleteVehicles(vehicleid: string): Promise<void>{\r\n  return new Promise(async (resolve, reject)=>{\r\n    try {\r\n      const result = await this.vehicleCollection.doc(vehicleid).delete();\r\n      resolve(result);\r\n    } catch (error) {\r\n      reject(error.message);\r\n    }\r\n  });\r\n  }\r\n  onSaveVehicle(vehicle: Vehicle, vechicleId: string): Promise<void>{\r\n    return new Promise(async (resolve, reject ) => {\r\n      try {\r\n        const id = vechicleId || this.afs.createId();\r\n        const data = {id, ...vehicle };\r\n        const result = await this.vehicleCollection.doc(id).set(data);\r\n        resolve(result);\r\n      } catch (error) {\r\n        reject(error.message);\r\n      }\r\n    });\r\n  }\r\n  private getVehicles(): void{\r\n    this.vehicles = this.vehicleCollection.snapshotChanges().pipe(\r\n       map(actions => actions.map(a => a.payload.doc.data() as Vehicle))\r\n    );\r\n  }\r\n  getVehiclesByIdVendor(id:string){\r\n    return this.afs.collection(('vehicles'), ref => ref.where('vendedor','==', id)).valueChanges();\r\n  }\r\n  \r\n  getVehiclesById(id:string){\r\n    return this.afs.collection(('vehicles'), ref => ref.where('id','==', id)).valueChanges();\r\n  }\r\n}\r\n\r\n"],"sourceRoot":""}