{"version":3,"sources":["webpack:///./src/app/admin/versiones/list-versiones/list-versiones.component.html","webpack:///./src/app/admin/versiones/list-versiones/list-versiones.component.css","webpack:///./src/app/admin/versiones/list-versiones/list-versiones.component.ts","webpack:///./src/app/services/versiones.service.ts"],"names":[],"mappings":"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","file":"default~admin-vehiculos-vehiculos-module~admin-versiones-versiones-module-es2015.js","sourcesContent":["module.exports = \"<table mat-table [dataSource]=\\\"dataSource| paginate: {id:'listar', itemsPerPage: 4, currentPage: pageActual }\\\" class=\\\"mat-elevation-z8\\\">\\r\\n\\r\\n  <ng-container matColumnDef=\\\"category\\\">\\r\\n    <th mat-header-cell *matHeaderCellDef> Categoria </th>\\r\\n    <td mat-cell *matCellDef=\\\"let element\\\"> {{element.category}} </td>\\r\\n  </ng-container>\\r\\n\\r\\n    <ng-container matColumnDef=\\\"marca\\\">\\r\\n      <th mat-header-cell *matHeaderCellDef> Marca </th>\\r\\n      <td mat-cell *matCellDef=\\\"let element\\\"> {{element.marca}} </td>\\r\\n    </ng-container>\\r\\n  \\r\\n    <ng-container matColumnDef=\\\"modelo\\\">\\r\\n      <th mat-header-cell *matHeaderCellDef> Modelo </th>\\r\\n      <td mat-cell *matCellDef=\\\"let element\\\"> {{element.modelo}} </td>\\r\\n    </ng-container>\\r\\n  \\r\\n    <ng-container matColumnDef=\\\"version\\\">\\r\\n        <th mat-header-cell *matHeaderCellDef> Version </th>\\r\\n        <td mat-cell *matCellDef=\\\"let element\\\"> {{element.name}} </td>\\r\\n      </ng-container>\\r\\n\\r\\n    <ng-container matColumnDef=\\\"actions\\\">\\r\\n      <th mat-header-cell *matHeaderCellDef>  </th>\\r\\n      <td mat-cell *matCellDef=\\\"let element\\\"><button mat-button (click)=\\\"openEditModal(element.id, editModal, element.marca, element.modelo, element.name)\\\">Editar</button> <button mat-button (click)=\\\"openDeleteModal(element.id, deleteModal)\\\">Eliminar</button></td>\\r\\n    </ng-container>\\r\\n  \\r\\n    <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\r\\n    <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\r\\n  </table>\\r\\n  <pagination-controls id=\\\"listar\\\" (pageChange)=\\\"pageActual = $event\\\" responsive=\\\"true\\\">\\r\\n  </pagination-controls>\\r\\n  \\r\\n  <ng-template #editModal>\\r\\n    <div class=\\\"body\\\">\\r\\n        <mat-card>\\r\\n            <mat-card-title>\\r\\n                Editar Version\\r\\n            </mat-card-title>\\r\\n            <mat-card-actions>\\r\\n              <div class=\\\"form\\\">\\r\\n                <form [formGroup]=\\\"versionForm\\\">\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-6\\\">\\r\\n                            <div class=\\\"form-floating mb-3\\\">\\r\\n                                <select class=\\\"form-control form-select form-select-lg mb-3\\\" aria-label=\\\".form-select-lg example\\\"\\r\\n                                 formControlName=\\\"category\\\" id=\\\"floatingSelect\\\" style=\\\"padding-top: 1.525rem;\\\">\\r\\n                                 <option [value]=\\\"category.name\\\" *ngFor=\\\"let category of categories\\\">{{ category.name }}</option>\\r\\n                                </select>\\r\\n                                <label for=\\\"floatingSelect\\\" class=\\\"lblfloat\\\">Seleccionar categoria</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-6\\\">\\r\\n                            <div class=\\\"form-floating mb-3\\\">\\r\\n                                <select class=\\\"form-control form-select form-select-lg mb-3\\\" aria-label=\\\".form-select-lg example\\\"\\r\\n                                 formControlName=\\\"marca\\\" id=\\\"floatingSelect\\\" style=\\\"padding-top: 1.525rem;\\\">\\r\\n                                 <option [value]=\\\"marca.name\\\" *ngFor=\\\"let marca of marcas\\\">{{ marca.name }}</option>\\r\\n                                </select>\\r\\n                                <label for=\\\"floatingSelect\\\" class=\\\"lblfloat\\\">Seleccionar marca</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col-6\\\">\\r\\n                            <div class=\\\"form-floating mb-3\\\">\\r\\n                                <select class=\\\"form-control form-select form-select-lg mb-3\\\" aria-label=\\\".form-select-lg example\\\"\\r\\n                                 formControlName=\\\"modelo\\\" id=\\\"floatingSelect\\\" style=\\\"padding-top: 1.525rem;\\\">\\r\\n                                 <option [value]=\\\"modelo.name\\\" *ngFor=\\\"let modelo of modelos\\\">{{ modelo.name }}</option>\\r\\n                                </select>\\r\\n                                <label for=\\\"floatingSelect\\\" class=\\\"lblfloat\\\">Seleccionar modelo</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-6\\\">\\r\\n                            <div class=\\\"form-floating mb-3\\\">\\r\\n                                <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"floatingInput\\\" placeholder=\\\"Nombre de la version\\\" formControlName=\\\"name\\\">\\r\\n                                <label for=\\\"floatingInput\\\">Nombre de la version</label>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </form>\\r\\n            </div>\\r\\n                  <button mat-button [disabled]=\\\"!versionForm.valid\\\" (click)=\\\"onGuardar()\\\">Guardar</button>\\r\\n            </mat-card-actions>\\r\\n        </mat-card>\\r\\n    </div>\\r\\n  </ng-template>\\r\\n  <ng-template #deleteModal>\\r\\n    <mat-card>\\r\\n        <mat-card-title>\\r\\n            Desea continuar?\\r\\n        </mat-card-title>\\r\\n        <mat-card-actions align=\\\"end\\\">\\r\\n            <button mat-button (click)=\\\"onEliminar()\\\">Eliminar</button>\\r\\n        </mat-card-actions>\\r\\n    </mat-card>\\r\\n  </ng-template>\"","module.exports = \"table {\\r\\n    width: 100%;\\r\\n  }\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYWRtaW4vdmVyc2lvbmVzL2xpc3QtdmVyc2lvbmVzL2xpc3QtdmVyc2lvbmVzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxXQUFXO0VBQ2IiLCJmaWxlIjoic3JjL2FwcC9hZG1pbi92ZXJzaW9uZXMvbGlzdC12ZXJzaW9uZXMvbGlzdC12ZXJzaW9uZXMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbInRhYmxlIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gIH0iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { CategoriasService } from 'src/app/services/categorias.service';\r\nimport { MarcasService } from 'src/app/services/marcas.service';\r\nimport { ModelosService } from 'src/app/services/modelos.service';\r\nimport { VersionesService } from 'src/app/services/versiones.service';\r\n\r\n@Component({\r\n  selector: 'app-list-versiones',\r\n  templateUrl: './list-versiones.component.html',\r\n  styleUrls: ['./list-versiones.component.css']\r\n})\r\nexport class ListVersionesComponent implements OnInit {\r\n  marcas: any[];\r\n  modelos: any[];\r\n  categories: any[];\r\n  pageActual: number = 1; \r\n  displayedColumns: string[] = ['category','marca', 'modelo','version', 'actions'];\r\n  dataSource: any;\r\n  idactual:string;\r\n  versionForm: FormGroup;\r\n\r\n  constructor(private versionService: VersionesService,\r\n    private fb: FormBuilder, private dialog: NgbModal,\r\n    private marcasSv: MarcasService,\r\n    private categoriaSv: CategoriasService,\r\n    private modelosSv: ModelosService) {\r\n    this.versionService.versiones.subscribe(resp=> {\r\n      this.dataSource = resp;\r\n    })\r\n    this.marcasSv.marcas.subscribe(resp=> {\r\n      this.marcas = resp;\r\n    })\r\n    this.categoriaSv.categories.subscribe(resp=> {\r\n      this.categories = resp;\r\n    })\r\n    this.modelosSv.modelos.subscribe(resp=> {\r\n      this.modelos = resp;\r\n    })\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    this.initForm();\r\n  }\r\n  openEditModal(id:string, modal, marca:string, modelo:string, version:string, categoria:string){\r\n    this.idactual = id;\r\n    marca != null ? this.versionForm.get('marca').setValue(marca): \"\";\r\n    modelo!= null ? this.versionForm.get('modelo').setValue(modelo): \"\";\r\n    version!= null ? this.versionForm.get('name').setValue(version): \"\";\r\n    categoria != null ? this.versionForm.get('category').setValue(categoria): \"\";\r\n    this.dialog.open(modal);\r\n\r\n  }\r\n  openDeleteModal(id:string, modal){\r\n    this.idactual = id;\r\n    this.dialog.open(modal);\r\n  }\r\n\r\n  initForm(){\r\n    this.versionForm = this.fb.group({\r\n      category: new FormControl('', [Validators.required]),\r\n      marca: new FormControl('', [Validators.required]),\r\n      modelo: new FormControl('', [Validators.required]),\r\n      name: new FormControl('', [Validators.required])\r\n    })\r\n  }\r\n\r\n  onGuardar(){\r\n    if (this.versionForm.valid) {\r\n      this.versionService.onSaveVersion(this.versionForm.value, this.idactual);\r\n    }\r\n  }\r\n  onEliminar(){\r\n    this.versionService.onDeleteVersion(this.idactual);\r\n  }\r\n}\r\n","import { Version } from '@angular/compiler';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VersionesService {\r\n  versiones: Observable<Version[]>;\r\n\r\n  private versionCollection : AngularFirestoreCollection;\r\n\r\n  constructor(private readonly afs: AngularFirestore) {\r\n    this.versionCollection = afs.collection<Version>('versiones');\r\n    this.getVersiones();\r\n   }\r\n\r\n   \r\n  onDeleteVersion(versionId: string): Promise<void>{\r\n    return new Promise(async (resolve, reject ) => {\r\n      try {\r\n        const result = this.versionCollection.doc(versionId).delete();\r\n        resolve(result);\r\n      } catch (error) {\r\n        reject(error.message);\r\n      }\r\n    });\r\n }\r\n onSaveVersion(version:Version, versionId: string): Promise<void>{\r\n  return new Promise(async (resolve, reject) => {\r\n    try {\r\n      const id = versionId || this.afs.createId();\r\n      const data = {id, ...version};\r\n      const result = await this.versionCollection.doc(id).set(data);\r\n      resolve(result);\r\n    } catch (error) {\r\n      reject(error.message);\r\n    }\r\n  })\r\n }\r\n private getVersiones():void{\r\n   console.log('get marcas')\r\n   this.versiones = this.versionCollection.snapshotChanges().pipe(\r\n      map(actions => actions.map(a => a.payload.doc.data() as Version))\r\n   );\r\n }\r\n getVersionesforMarcaModelo(marca:string, modelo:string){\r\n  return this.afs.collection(('versiones'), ref => ref.where('marca', '==', marca).where('modelo','==', modelo)).valueChanges();\r\n}\r\n}\r\n"],"sourceRoot":""}