{"version":3,"sources":["webpack:///./src/app/services/vehicles.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAA2C;AAI4C;AAClD;AAKrC;IAME,yBAA6B,GAAqB;QAArB,QAAG,GAAH,GAAG,CAAkB;QAChD,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC,UAAU,CAAU,UAAU,CAAC,CAAC;QAC7D,IAAI,CAAC,WAAW,EAAE,CAAC;IACpB,CAAC;IAEF,0CAAgB,GAAhB,UAAiB,SAAiB;QAAlC,iBASC;QARD,OAAO,IAAI,OAAO,CAAC,UAAO,OAAO,EAAE,MAAM;;;;;;wBAEtB,qBAAM,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE;;wBAA7D,MAAM,GAAG,SAAoD;wBACnE,OAAO,CAAC,MAAM,CAAC,CAAC;;;;wBAEhB,MAAM,CAAC,OAAK,CAAC,OAAO,CAAC,CAAC;;;;;aAEzB,CAAC,CAAC;IACH,CAAC;IACD,uCAAa,GAAb,UAAc,OAAgB,EAAE,UAAkB;QAAlD,iBAWC;QAVC,OAAO,IAAI,OAAO,CAAC,UAAO,OAAO,EAAE,MAAM;;;;;;wBAE/B,EAAE,GAAG,UAAU,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;wBACvC,IAAI,GAAG,yDAAC,EAAE,QAAK,OAAO,CAAE,CAAC;wBAChB,qBAAM,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;;wBAAvD,MAAM,GAAG,SAA8C;wBAC7D,OAAO,CAAC,MAAM,CAAC,CAAC;;;;wBAEhB,MAAM,CAAC,OAAK,CAAC,OAAO,CAAC,CAAC;;;;;aAEzB,CAAC,CAAC;IACL,CAAC;IACO,qCAAW,GAAnB;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,eAAe,EAAE,CAAC,IAAI,CAC1D,0DAAG,CAAC,iBAAO,IAAI,cAAO,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAa,EAA/B,CAA+B,CAAC,EAAjD,CAAiD,CAAC,CACnE,CAAC;IACJ,CAAC;IACD,+CAAqB,GAArB,UAAsB,EAAS;QAC7B,OAAO,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,UAAU,CAAC,EAAE,aAAG,IAAI,UAAG,CAAC,KAAK,CAAC,UAAU,EAAC,IAAI,EAAE,EAAE,CAAC,EAA9B,CAA8B,CAAC,CAAC,YAAY,EAAE,CAAC;IACjG,CAAC;IAED,yCAAe,GAAf,UAAgB,EAAS;QACvB,OAAO,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,UAAU,CAAC,EAAE,aAAG,IAAI,UAAG,CAAC,KAAK,CAAC,IAAI,EAAC,IAAI,EAAE,EAAE,CAAC,EAAxB,CAAwB,CAAC,CAAC,YAAY,EAAE,CAAC;IAC3F,CAAC;;gBAtCiC,wEAAgB;;IANvC,eAAe;QAH3B,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;uFAOkC,wEAAgB;OANvC,eAAe,CA6C3B;IAAD,sBAAC;CAAA;AA7C2B","file":"common-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Vehicle } from '../models/vehicle.interface';\r\n\r\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VehiclesService {\r\n\r\n  vehicles: Observable<Vehicle[]>;\r\n\r\n  private vehicleCollection: AngularFirestoreCollection<Vehicle>;\r\n\r\n  constructor(private readonly afs: AngularFirestore) {\r\n    this.vehicleCollection = afs.collection<Vehicle>('vehicles');\r\n    this.getVehicles();\r\n   }\r\n\r\n  onDeleteVehicles(vehicleid: string): Promise<void>{\r\n  return new Promise(async (resolve, reject)=>{\r\n    try {\r\n      const result = await this.vehicleCollection.doc(vehicleid).delete();\r\n      resolve(result);\r\n    } catch (error) {\r\n      reject(error.message);\r\n    }\r\n  });\r\n  }\r\n  onSaveVehicle(vehicle: Vehicle, vechicleId: string): Promise<void>{\r\n    return new Promise(async (resolve, reject ) => {\r\n      try {\r\n        const id = vechicleId || this.afs.createId();\r\n        const data = {id, ...vehicle };\r\n        const result = await this.vehicleCollection.doc(id).set(data);\r\n        resolve(result);\r\n      } catch (error) {\r\n        reject(error.message);\r\n      }\r\n    });\r\n  }\r\n  private getVehicles(): void{\r\n    this.vehicles = this.vehicleCollection.snapshotChanges().pipe(\r\n       map(actions => actions.map(a => a.payload.doc.data() as Vehicle))\r\n    );\r\n  }\r\n  getVehiclesByIdVendor(id:string){\r\n    return this.afs.collection(('vehicles'), ref => ref.where('vendedor','==', id)).valueChanges();\r\n  }\r\n  \r\n  getVehiclesById(id:string){\r\n    return this.afs.collection(('vehicles'), ref => ref.where('id','==', id)).valueChanges();\r\n  }\r\n}\r\n\r\n"],"sourceRoot":""}